# K3 Evidence Plan (Draft)

This document defines where “evidence” for high-risk controls is produced and how to regenerate it.

Evidence should be reproducible from a commit SHA and should not require hand-assembled screenshots where a command,
report, or CI artifact is possible.

## Evidence sources

### CI artifacts (preferred)

- **Coverage reports**: generated by `bash scripts/verify-coverage.sh` (also mirrored by `.github/workflows/test.yml`).
- **Static analysis**: `golangci-lint` output.
- **Security scans**:
  - `bash scripts/sec-gosec.sh` (SARIF/report output)
  - `bash scripts/sec-govulncheck.sh` (CLI report output)
  - CI mirror: `.github/workflows/security-gates.yml`

### In-repo documents (deterministic artifacts)

- Scope + controls matrix: `docs/planning/pci-dss-v4.0.1-controls-matrix.md`
- Versioned rubric: `docs/planning/k3-10of10-rubric.md`
- Roadmap mapped to rubric IDs: `docs/planning/k3-10of10-roadmap.md`
- Threat model: `docs/planning/k3-cde-threat-model.md`
- Operational runbooks: `docs/operations/incident-response-runbook.md`

## Rubric-to-evidence map (Rubric v0.2)

| Rubric ID | Primary evidence | How to refresh |
| --- | --- | --- |
| QUA-1 | Test output | `make test-unit` |
| QUA-2 | Test output (CI/local) | `make test-integration` |
| QUA-3 | `coverage.out` + summary | `bash scripts/verify-coverage.sh` |
| CON-1 | `gofmt` diff list | `bash scripts/fmt-check.sh` |
| CON-2 | Lint output | `golangci-lint run --timeout=5m --config .golangci-v2.yml` |
| COM-1 | Multi-module compile output | `bash scripts/verify-go-modules.sh` |
| COM-2 | CI alignment check output | `bash scripts/verify-ci-toolchain.sh` |
| COM-3 | `golangci-lint config verify` output | `golangci-lint config verify -c .golangci-v2.yml` |
| COM-4 | Coverage threshold check output | `bash scripts/verify-coverage-threshold.sh` |
| COM-5 | Gosec config check output | `bash scripts/verify-sec-gosec-config.sh` |
| COM-6 | Logging standards check output | `bash scripts/verify-logging-standards.sh` |
| SEC-1 | Gosec report | `bash scripts/sec-gosec.sh` |
| SEC-2 | Govulncheck report | `bash scripts/sec-govulncheck.sh` |
| SEC-3 | `go mod verify` output | `go mod verify` |
| SEC-4 | PCI P0 test output | `go test ./test/security -run TestPCIDSSRequirement3_2_2_Compliance` |
| CMP-* | Planning docs + verification output | `bash scripts/verify-planning-docs.sh` |
